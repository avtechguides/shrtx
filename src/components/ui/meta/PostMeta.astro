---
import { author } from '../../../data/author';
import FormattedDate from '../../FormattedDate.astro';
import { slugifyTag as slugify } from '../../../lib/slug';

interface Props {
  pubDate: Date;
  readingTimeMin: number;
  authorName?: string;
}
const { pubDate, readingTimeMin, authorName } = Astro.props as Props;

const name = authorName ?? author.name;
---

<div class="sw-post-meta flex items-start justify-between gap-4 py-2">
  <div class="flex items-start gap-3">
    <div class="w-12 h-12 rounded-full overflow-hidden ring-1 ring-inset ring-[var(--border)]">
      <img
        src={author.avatar.src}
        alt={`Avatar of ${name}`}
        width="48"
        height="48"
        class="w-full h-full object-cover"
        loading="lazy"
        decoding="async"
      />
    </div>
    <div class="flex flex-col">
      <a
        href={`/blog/author/${slugify(name)}/`}
        class="text-sm font-semibold text-[var(--foreground)] hover:text-[var(--accent)] no-underline hover:underline underline-offset-2 focus:outline-none focus:ring-1 focus:ring-[var(--accent)]"
      >
        {name}
      </a>

      <div class="flex items-center gap-3 text-xs text-[var(--muted-foreground,#6b7280)] mt-1">
        <div class="flex items-center gap-1" aria-label="Publication date">
          <svg
            viewBox="0 0 24 24"
            width="14"
            height="14"
            fill="currentColor"
            aria-hidden="true"
            focusable="false"
            class="text-[var(--muted-foreground,#6b7280)]"
          >
            <path d="M19 3h-1V1h-2v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V8h14v11zM7 10h5v5H7z" />
          </svg>
          <FormattedDate date={pubDate} />
        </div>

        <div class="flex items-center gap-1" aria-label="Reading time">
          <svg
            viewBox="0 0 24 24"
            width="14"
            height="14"
            fill="currentColor"
            aria-hidden="true"
            focusable="false"
            class="text-[var(--muted-foreground,#6b7280)]"
          >
            <path d="M12 22a10 10 0 1 1 0-20 10 10 0 0 1 0 20Zm0-18a8 8 0 1 0 0 16 8 8 0 0 0 0-16Zm1 9h3v-2h-2V7h-2v6Z" />
          </svg>
          <span>{readingTimeMin} min read</span>
        </div>
      </div>
    </div>
  </div>
</div>
