---
// ToolCard.astro
import Button from '../button/Button.astro';
import type { Tool } from '../../../data/tools/tools';
import { slugifyTag } from '../../../lib/slug';

const {
  title,
  description,
  icon = '',
  category,
  isPremium = false,
  popularity,
  authorSlug,
  createdAt,
  href
} = Astro.props as Tool;

const categorySlug = category ? slugifyTag(category) : '';
const displayDate = createdAt ? new Date(createdAt).toLocaleDateString() : '';
---

<article class="bg-[var(--card)] rounded-2xl shadow-md hover:shadow-xl transition-shadow p-6 flex flex-col justify-between">
  <header class="flex items-center gap-4 mb-4">
    <div class="w-12 h-12 flex items-center justify-center text-2xl">
      <span set:html={icon}></span>
    </div>
    <div class="flex-1">
      <h3 class="text-lg font-semibold">{title}</h3>
      <div class="flex flex-wrap gap-2 mt-1">
        {category && (
          <Button 
            href={`/tools/categories/${categorySlug}`} 
            variant="outline" 
            size="sm" 
            class="pointer-events-auto"
          >
            {category}
          </Button>
        )}
        {isPremium && (
          <span class="text-xs bg-yellow-400 text-black px-2 py-0.5 rounded-full font-medium">
            Premium
          </span>
        )}
        {popularity !== undefined && (
          <span class="text-xs text-[var(--muted-foreground)]">
            ‚≠ê {popularity}
          </span>
        )}
      </div>
    </div>
  </header>

  <p class="text-sm text-[var(--muted-foreground)] mb-4">{description}</p>

  <footer class="flex items-center justify-between mt-4 text-xs text-[var(--muted-foreground)]">
    <div class="flex gap-2">
      {authorSlug && <span>By {authorSlug}</span>}
      {displayDate && <span>{displayDate}</span>}
    </div>
    <Button 
      href={href ?? '#'} 
      variant="primary" 
      size="sm" 
      disabled={!href}
    >
      {href ? 'Open Tool' : 'Coming Soon'}
    </Button>
  </footer>
</article>
